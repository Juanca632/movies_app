import{a as y,r,j as e,m as x}from"./index-Dq4Stfjf.js";import{f as m}from"./swiper-bundle-C51L7z_K.js";import{l as _}from"./loading_banner_img-qDW4rTdH.js";import{s as T}from"./star-CtwnzLpu.js";import{T as v}from"./TvShowList-Dnrcytev.js";function P(){var h;const{id:n}=y(),[i,d]=r.useState(null),[o,f]=r.useState(null),[s,N]=r.useState(null),[p,c]=r.useState(null),[g,b]=r.useState(null);r.useEffect(()=>{window.scrollTo(0,0),d(null),f(null)},[n]),r.useEffect(()=>{if(i&&i.posters.length>0){const t=w(i.posters);t&&b(`https://image.tmdb.org/t/p/w500${t.file_path}`)}},[i==null?void 0:i.posters]),r.useEffect(()=>{const t=async()=>{try{const a=await m(`tv/${n}/images`);a&&(d(a),c(null));const u=await m(`tv/${n}/providers`);u&&(f(u),c(null));const j=await m(`tv/${n}/`);j&&(N(j),c(null))}catch(a){console.error("Error fetching movie:",a),c("Error fetching data. Retrying...")}};t();const l=setInterval(()=>{p&&t()},5e3);return()=>clearInterval(l)},[p,n]);const w=t=>{const l=t.filter(a=>a.iso_639_1==="en");if(l.length===1)return l[0];if(l.length>1){const a=Math.floor(Math.random()*(l.length-1))+1;return l[a]}return null};return e.jsxs("div",{className:"min-h-screen w-full bg-zinc-900 text-4xl text-white md:py-10 py-0",children:[e.jsxs("div",{className:"grid xl:grid-cols-[auto_1fr] xl:grid-rows-[auto] xl:gap-20 gap-5 grid-cols-[auto] grid-rows-[auto-auto]  w-full md:py-5 pb-5 md:px-10 px-0 relative",children:[e.jsx("div",{className:"relative flex justify-center items-center",children:g!=null?e.jsx("img",{src:g,alt:"Backdrop",className:"object-cover h-full xl:h-150"}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:_,alt:"Loading image",className:"object-cover h-full xl:h-150"}),e.jsx("div",{className:"skeleton-image absolute inset-0  z-10"})]})}),e.jsxs("div",{className:"w-full flex justify-center flex-col px-5 gap-3",children:[e.jsx("h1",{className:"md:text-6xl text-3xl",children:s==null?void 0:s.name}),e.jsxs("div",{className:"flex gap-7",children:[e.jsxs("div",{className:"flex gap-2",children:[s&&e.jsx("img",{src:T,alt:"star",className:"h-10"}),e.jsx("p",{children:s==null?void 0:s.vote_average.toFixed(1)})]}),e.jsx("div",{children:e.jsx("p",{className:"text-gray-600"})})]}),s&&e.jsxs("div",{className:"flex gap-5",children:[e.jsxs("p",{className:"text-gray-600 text-xl font-bold",children:[s==null?void 0:s.number_of_episodes," episodes"]}),e.jsxs("p",{className:"text-gray-600 text-xl font-bold",children:[s==null?void 0:s.number_of_seasons," seasons"]})]}),e.jsx("ul",{className:"flex gap-3 flex-wrap",children:s&&s.genres.map((t,l)=>e.jsx(x.li,{className:"text-sm p-1 px-3 border-2 border-gray-400 rounded-xl text-gray-400 font-bold cursor-pointer",whileTap:{scale:.9},whileHover:{scale:1.1},children:t.name},l))}),e.jsx("p",{className:"text-base",children:s==null?void 0:s.overview})]})]}),e.jsxs("div",{className:"flex xl:px-10 px-5 flex-col",children:[(o==null?void 0:o.flatrate)&&e.jsx("p",{className:"text-white xl:text-3xl text-2xl font-bold mb-3",children:"Providers"}),e.jsx("div",{className:"flex gap-5",children:(h=o==null?void 0:o.flatrate)==null?void 0:h.map((t,l)=>t.provider_name!=="Netflix basic with Ads"&&e.jsx(x.a,{href:o.link,target:"_blank",rel:"noopener noreferrer",whileTap:{scale:.9},whileHover:{scale:1.1},children:e.jsx(x.img,{src:`https://image.tmdb.org/t/p/w500${t.logo_path}`,alt:t.provider_name,className:"h-20 cursor-pointer rounded-2xl",whileTap:{scale:.9}})},l))})]}),e.jsxs("div",{className:"flex flex-col gap-10 py-10",children:[e.jsx(v,{endpoint:`tv/${n}/credits`,title:"Casting",person:!0}),e.jsx(v,{endpoint:`tv/${n}/recommendations`,title:"Recommended TV shows",person:!1})]})]})}export{P as default};
