import{a as y,r as a,j as e,m as x}from"./index-DXpNs9p6.js";import{f as d}from"./swiper-bundle-MnpBeETV.js";import{M as v}from"./MovieList-leaiXBjV.js";import{s as _}from"./star-CtwnzLpu.js";function S(){var g;const{id:n}=y(),[o,m]=a.useState(null),[i,f]=a.useState(null),[s,w]=a.useState(null),[p,c]=a.useState(null),[h,N]=a.useState(null);a.useEffect(()=>{window.scrollTo(0,0),m(null),f(null)},[n]),a.useEffect(()=>{if(o&&o.posters.length>0){const t=b(o.posters);t&&N(`https://image.tmdb.org/t/p/w500${t.file_path}`)}},[o==null?void 0:o.posters]),a.useEffect(()=>{const t=async()=>{try{const r=await d(`movies/${n}/images`);r&&(m(r),c(null));const u=await d(`movies/${n}/providers`);u&&(f(u),c(null));const j=await d(`movies/${n}`);j&&(w(j),c(null))}catch(r){console.error("Error fetching movie:",r),c("Error fetching data. Retrying...")}};t();const l=setInterval(()=>{p&&t()},5e3);return()=>clearInterval(l)},[p,n]);const b=t=>{const l=t.filter(r=>r.iso_639_1==="en");if(l.length===1)return l[0];if(l.length>1){const r=Math.floor(Math.random()*(l.length-1))+1;return l[r]}return null};return e.jsxs("div",{className:"min-h-screen w-full bg-zinc-900 text-4xl text-white md:py-10 py-0",children:[e.jsxs("div",{className:"grid xl:grid-cols-[auto_1fr] xl:grid-rows-[auto] xl:gap-20 gap-5 grid-cols-[auto] grid-rows-[auto-auto]  w-full md:py-5 pb-5 md:px-10 px-0 relative",children:[e.jsx("div",{className:"relative flex justify-center items-center",children:h!=null?e.jsx("img",{src:h,alt:"Backdrop",className:"object-cover h-full xl:h-150"}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"skeleton-image absolute inset-0  z-10"})})}),e.jsxs("div",{className:"w-full flex justify-center flex-col px-5 gap-3",children:[e.jsx("h1",{className:"md:text-6xl text-3xl",children:s==null?void 0:s.title}),e.jsxs("div",{className:"flex gap-7",children:[e.jsxs("div",{className:"flex gap-2",children:[s&&e.jsx("img",{src:_,alt:"star",className:"h-10"}),e.jsx("p",{children:s==null?void 0:s.vote_average.toFixed(1)})]}),e.jsx("div",{children:e.jsx("p",{className:"text-gray-600",children:s==null?void 0:s.release_date.slice(0,4)})})]}),e.jsx("ul",{className:"flex gap-3 flex-wrap",children:s&&s.genres.map((t,l)=>e.jsx(x.li,{className:"text-sm p-1 px-3 border-2 border-gray-400 rounded-xl text-gray-400 font-bold cursor-pointer",whileTap:{scale:.9},whileHover:{scale:1.1},children:t.name},l))}),e.jsx("p",{className:"text-base",children:s==null?void 0:s.overview})]})]}),e.jsxs("div",{className:"flex xl:px-10 px-5 flex-col",children:[(i==null?void 0:i.flatrate)&&e.jsx("p",{className:"text-white xl:text-3xl text-2xl font-bold mb-3",children:"Where to watch"}),e.jsx("div",{className:"flex flex-wrap gap-5",children:(g=i==null?void 0:i.flatrate)==null?void 0:g.map((t,l)=>t.provider_name!=="Netflix basic with Ads"&&e.jsx(x.a,{href:i.link,target:"_blank",rel:"noopener noreferrer",whileTap:{scale:.9},whileHover:{scale:1.1},children:e.jsx(x.img,{src:`https://image.tmdb.org/t/p/w500${t.logo_path}`,alt:t.provider_name,className:"h-20 cursor-pointer rounded-2xl",whileTap:{scale:.9}})},l))})]}),e.jsxs("div",{className:"flex flex-col gap-10 py-10",children:[e.jsx(v,{endpoint:`movies/${n}/credits`,title:"Casting",person:!0}),e.jsx(v,{endpoint:`movies/${n}/recommendations`,title:"Recommended movies",person:!1})]})]})}export{S as default};
